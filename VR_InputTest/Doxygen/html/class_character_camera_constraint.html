<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VR_Test: CharacterCameraConstraint Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">VR_Test<span id="projectnumber">&#160;0.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="class_character_camera_constraint-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">CharacterCameraConstraint Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This component is responsible for moving the character capsule to match the HMD, fading out the camera or blocking movement when collisions occur, and adjusting the character capsule height to match the HMD's offset from the ground.  
 <a href="class_character_camera_constraint.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for CharacterCameraConstraint:</div>
<div class="dyncontent">
<div class="center"><img src="class_character_camera_constraint__inherit__graph.png" border="0" usemap="#a_character_camera_constraint_inherit__map" alt="Inheritance graph"/></div>
<map name="a_character_camera_constraint_inherit__map" id="a_character_camera_constraint_inherit__map">
<area shape="rect" title="This component is responsible for moving the character capsule to match the HMD, fading out the camer..." alt="" coords="5,80,187,107"/>
<area shape="rect" title=" " alt="" coords="41,5,151,32"/>
<area shape="poly" title=" " alt="" coords="99,48,99,80,93,80,93,48"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for CharacterCameraConstraint:</div>
<div class="dyncontent">
<div class="center"><img src="class_character_camera_constraint__coll__graph.png" border="0" usemap="#a_character_camera_constraint_coll__map" alt="Collaboration graph"/></div>
<map name="a_character_camera_constraint_coll__map" id="a_character_camera_constraint_coll__map">
<area shape="rect" title="This component is responsible for moving the character capsule to match the HMD, fading out the camer..." alt="" coords="5,263,187,289"/>
<area shape="rect" title=" " alt="" coords="117,5,227,32"/>
<area shape="poly" title=" " alt="" coords="140,43,120,61,105,83,96,106,90,131,86,183,90,229,96,262,90,262,85,229,81,183,85,131,91,105,100,80,116,58,136,40"/>
<area shape="rect" href="class_o_v_r_camera_rig.html" title="A head&#45;tracked stereoscopic virtual reality camera rig." alt="" coords="115,81,229,108"/>
<area shape="poly" title=" " alt="" coords="175,47,175,81,169,81,169,47"/>
<area shape="rect" href="class_simple_capsule_with_stick_movement.html" title=" " alt="" coords="188,172,412,199"/>
<area shape="poly" title=" " alt="" coords="202,40,242,80,275,129,297,171,292,173,270,132,238,83,198,44"/>
<area shape="poly" title=" " alt="" coords="149,121,128,145,110,173,103,197,99,221,98,262,93,262,94,221,98,195,106,171,123,141,145,117"/>
<area shape="poly" title=" " alt="" coords="174,122,177,135,183,146,199,160,218,169,215,174,196,164,179,150,172,137,169,124"/>
<area shape="poly" title=" " alt="" coords="258,208,126,265,124,260,256,203"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:acd549a12915c2775eaa50229c7c057af" id="r_acd549a12915c2775eaa50229c7c057af"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_o_v_r_camera_rig.html">OVRCameraRig</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_character_camera_constraint.html#acd549a12915c2775eaa50229c7c057af">CameraRig</a></td></tr>
<tr class="memdesc:acd549a12915c2775eaa50229c7c057af"><td class="mdescLeft">&#160;</td><td class="mdescRight">This should be a reference to the <a class="el" href="class_o_v_r_camera_rig.html" title="A head-tracked stereoscopic virtual reality camera rig.">OVRCameraRig</a> that is usually a child of the PlayerController.  <br /></td></tr>
<tr class="separator:acd549a12915c2775eaa50229c7c057af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90a189091b552e1b2d520a0a5f78ad10" id="r_a90a189091b552e1b2d520a0a5f78ad10"><td class="memItemLeft" align="right" valign="top">LayerMask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_character_camera_constraint.html#a90a189091b552e1b2d520a0a5f78ad10">CollideLayers</a></td></tr>
<tr class="memdesc:a90a189091b552e1b2d520a0a5f78ad10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Collision layers to be used for the purposes of fading out the screen when the HMD is inside world geometry and adjusting the capsule height.  <br /></td></tr>
<tr class="separator:a90a189091b552e1b2d520a0a5f78ad10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b897a03db74efd665506cab5b5e2538" id="r_a4b897a03db74efd665506cab5b5e2538"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_character_camera_constraint.html#a4b897a03db74efd665506cab5b5e2538">HeightOffset</a></td></tr>
<tr class="memdesc:a4b897a03db74efd665506cab5b5e2538"><td class="mdescLeft">&#160;</td><td class="mdescRight">Offset is added to camera's real world height, effectively treating it as though the player was taller/standing higher.  <br /></td></tr>
<tr class="separator:a4b897a03db74efd665506cab5b5e2538"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a692acebb9f4beef325eb3931a0ab64c3" id="r_a692acebb9f4beef325eb3931a0ab64c3"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_character_camera_constraint.html#a692acebb9f4beef325eb3931a0ab64c3">MinimumHeight</a></td></tr>
<tr class="memdesc:a692acebb9f4beef325eb3931a0ab64c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimum height that the character capsule can shrink to. To disable, set to capsule's height.  <br /></td></tr>
<tr class="separator:a692acebb9f4beef325eb3931a0ab64c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3276b4c4e399fce310ece97a4554381f" id="r_a3276b4c4e399fce310ece97a4554381f"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_character_camera_constraint.html#a3276b4c4e399fce310ece97a4554381f">MaximumHeight</a></td></tr>
<tr class="memdesc:a3276b4c4e399fce310ece97a4554381f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum height that the character capsule can grow to. To disable, set to capsule's height.  <br /></td></tr>
<tr class="separator:a3276b4c4e399fce310ece97a4554381f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a28db40a4ecc66da346f184aad7796e17" id="r_a28db40a4ecc66da346f184aad7796e17"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_character_camera_constraint.html#a28db40a4ecc66da346f184aad7796e17">Awake</a> ()</td></tr>
<tr class="separator:a28db40a4ecc66da346f184aad7796e17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7be9a6729269651319efa1da90c63d5" id="r_ac7be9a6729269651319efa1da90c63d5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_character_camera_constraint.html#ac7be9a6729269651319efa1da90c63d5">OnEnable</a> ()</td></tr>
<tr class="separator:ac7be9a6729269651319efa1da90c63d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59a365ed8bd6930e6ef070ff61009c6b" id="r_a59a365ed8bd6930e6ef070ff61009c6b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_character_camera_constraint.html#a59a365ed8bd6930e6ef070ff61009c6b">OnDisable</a> ()</td></tr>
<tr class="separator:a59a365ed8bd6930e6ef070ff61009c6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55243dc9eca5ba54edb89a4ea3acc9a9" id="r_a55243dc9eca5ba54edb89a4ea3acc9a9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_character_camera_constraint.html#a55243dc9eca5ba54edb89a4ea3acc9a9">CameraUpdate</a> ()</td></tr>
<tr class="memdesc:a55243dc9eca5ba54edb89a4ea3acc9a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method is the handler for the PlayerController.CameraUpdated event, which is used to handle whether or not the screen should fade out due to the camera's position (such as in a wall), and update the character height based on camera position.  <br /></td></tr>
<tr class="separator:a55243dc9eca5ba54edb89a4ea3acc9a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d1bc99955de76231f513a5f853b596d" id="r_a5d1bc99955de76231f513a5f853b596d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_character_camera_constraint.html#a5d1bc99955de76231f513a5f853b596d">CheckCameraOverlapped</a> ()</td></tr>
<tr class="memdesc:a5d1bc99955de76231f513a5f853b596d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method checks whether the camera is inside of geometry or has geometry between it and the character's capsule.  <br /></td></tr>
<tr class="separator:a5d1bc99955de76231f513a5f853b596d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7357eb87689611d685fa3bc75ccaadb9" id="r_a7357eb87689611d685fa3bc75ccaadb9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_character_camera_constraint.html#a7357eb87689611d685fa3bc75ccaadb9">CheckCameraNearClipping</a> (out float result)</td></tr>
<tr class="memdesc:a7357eb87689611d685fa3bc75ccaadb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method checks whether the camera is close enough to geometry to cause it to start clipping, and if so, return the overlap amount.  <br /></td></tr>
<tr class="separator:a7357eb87689611d685fa3bc75ccaadb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ac3787f624ceb4def13302c0a960b2ec0" id="r_ac3787f624ceb4def13302c0a960b2ec0"><td class="memItemLeft" align="right" valign="top">CapsuleCollider&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_character_camera_constraint.html#ac3787f624ceb4def13302c0a960b2ec0">_character</a></td></tr>
<tr class="separator:ac3787f624ceb4def13302c0a960b2ec0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd45fa3b9036ae9b579140684d773410" id="r_afd45fa3b9036ae9b579140684d773410"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_simple_capsule_with_stick_movement.html">SimpleCapsuleWithStickMovement</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_character_camera_constraint.html#afd45fa3b9036ae9b579140684d773410">_simplePlayerController</a></td></tr>
<tr class="separator:afd45fa3b9036ae9b579140684d773410"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a3389bf44ab5de0a598255d9574d4786f" id="r_a3389bf44ab5de0a598255d9574d4786f"><td class="memItemLeft" align="right" valign="top">const float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_character_camera_constraint.html#a3389bf44ab5de0a598255d9574d4786f">FADE_RAY_LENGTH</a> = 0.25f</td></tr>
<tr class="separator:a3389bf44ab5de0a598255d9574d4786f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2789d0cb3730585637b2f4674cbc2d9" id="r_aa2789d0cb3730585637b2f4674cbc2d9"><td class="memItemLeft" align="right" valign="top">const float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_character_camera_constraint.html#aa2789d0cb3730585637b2f4674cbc2d9">FADE_OVERLAP_MAXIMUM</a> = 0.1f</td></tr>
<tr class="separator:aa2789d0cb3730585637b2f4674cbc2d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a288ba2fdc7a1ad9f0cc516ae4947383e" id="r_a288ba2fdc7a1ad9f0cc516ae4947383e"><td class="memItemLeft" align="right" valign="top">const float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_character_camera_constraint.html#a288ba2fdc7a1ad9f0cc516ae4947383e">FADE_AMOUNT_MAXIMUM</a> = 1.0f</td></tr>
<tr class="separator:a288ba2fdc7a1ad9f0cc516ae4947383e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This component is responsible for moving the character capsule to match the HMD, fading out the camera or blocking movement when collisions occur, and adjusting the character capsule height to match the HMD's offset from the ground. </p>

<p class="definition">Definition at line <a class="el" href="_character_camera_constraint_8cs_source.html#l00018">18</a> of file <a class="el" href="_character_camera_constraint_8cs_source.html">CharacterCameraConstraint.cs</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aab12d8faaba4f36125a058c05cac9ac7" name="aab12d8faaba4f36125a058c05cac9ac7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab12d8faaba4f36125a058c05cac9ac7">&#9670;&#160;</a></span>CharacterCameraConstraint()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CharacterCameraConstraint.CharacterCameraConstraint </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_character_camera_constraint_8cs_source.html#l00066">66</a> of file <a class="el" href="_character_camera_constraint_8cs_source.html">CharacterCameraConstraint.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   67</span>    {</div>
<div class="line"><span class="lineno">   68</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a28db40a4ecc66da346f184aad7796e17" name="a28db40a4ecc66da346f184aad7796e17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28db40a4ecc66da346f184aad7796e17">&#9670;&#160;</a></span>Awake()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CharacterCameraConstraint.Awake </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_character_camera_constraint_8cs_source.html#l00070">70</a> of file <a class="el" href="_character_camera_constraint_8cs_source.html">CharacterCameraConstraint.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   71</span>    {</div>
<div class="line"><span class="lineno">   72</span>        _character = GetComponent&lt;CapsuleCollider&gt;();</div>
<div class="line"><span class="lineno">   73</span>        _simplePlayerController = GetComponent&lt;SimpleCapsuleWithStickMovement&gt;();</div>
<div class="line"><span class="lineno">   74</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a55243dc9eca5ba54edb89a4ea3acc9a9" name="a55243dc9eca5ba54edb89a4ea3acc9a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55243dc9eca5ba54edb89a4ea3acc9a9">&#9670;&#160;</a></span>CameraUpdate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CharacterCameraConstraint.CameraUpdate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method is the handler for the PlayerController.CameraUpdated event, which is used to handle whether or not the screen should fade out due to the camera's position (such as in a wall), and update the character height based on camera position. </p>
<p>Future work: Have the character capsule attempt to match the camera's X,Z position so that hit detection and dodging work as expected. Presently the capsule only grows up and down, but doesn't otherwise change based on camera position. </p>

<p class="definition">Definition at line <a class="el" href="_character_camera_constraint_8cs_source.html#l00095">95</a> of file <a class="el" href="_character_camera_constraint_8cs_source.html">CharacterCameraConstraint.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   96</span>    {</div>
<div class="line"><span class="lineno">   97</span>        <span class="comment">// Check whether the camera is inside of geometry or on the other side of geometry.</span></div>
<div class="line"><span class="lineno">   98</span>        <span class="comment">// Then check if any geometry would be clipped.  Fade out screen accordingly.</span></div>
<div class="line"><span class="lineno">   99</span>        <span class="keywordtype">float</span> clippingOverlap = 0.0f;</div>
<div class="line"><span class="lineno">  100</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="class_character_camera_constraint.html#a5d1bc99955de76231f513a5f853b596d">CheckCameraOverlapped</a>())</div>
<div class="line"><span class="lineno">  101</span>        {</div>
<div class="line"><span class="lineno">  102</span>            <a class="code hl_class" href="class_o_v_r_screen_fade.html">OVRScreenFade</a>.instance.<a class="code hl_function" href="class_o_v_r_screen_fade.html#a8df1ac21b7aac08a9401a2d3187a95a1">SetExplicitFade</a>(FADE_AMOUNT_MAXIMUM);</div>
<div class="line"><span class="lineno">  103</span>        }</div>
<div class="line"><span class="lineno">  104</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="class_character_camera_constraint.html#a7357eb87689611d685fa3bc75ccaadb9">CheckCameraNearClipping</a>(out clippingOverlap))</div>
<div class="line"><span class="lineno">  105</span>        {</div>
<div class="line"><span class="lineno">  106</span>            <span class="comment">// Calculate a `t` value based on where in the interval [0.0, FADE_OVERLAP_MAXIMUM]</span></div>
<div class="line"><span class="lineno">  107</span>            <span class="comment">// that our actual overlap lies, and then use that `t` value to calulate an</span></div>
<div class="line"><span class="lineno">  108</span>            <span class="comment">// actual fade amount on the interval [0.0, FADE_AMOUNT_MAXIMUM].</span></div>
<div class="line"><span class="lineno">  109</span>            <span class="comment">// Note: Both math helper functions clamp `t` to within [0.0, 1.0].</span></div>
<div class="line"><span class="lineno">  110</span>            <span class="keywordtype">float</span> fadeParameter = Mathf.InverseLerp(0.0f, FADE_OVERLAP_MAXIMUM, clippingOverlap);</div>
<div class="line"><span class="lineno">  111</span>            <span class="keywordtype">float</span> fadeAlpha = Mathf.Lerp(0.0f, FADE_AMOUNT_MAXIMUM, fadeParameter);</div>
<div class="line"><span class="lineno">  112</span>            <a class="code hl_class" href="class_o_v_r_screen_fade.html">OVRScreenFade</a>.instance.<a class="code hl_function" href="class_o_v_r_screen_fade.html#a8df1ac21b7aac08a9401a2d3187a95a1">SetExplicitFade</a>(fadeAlpha);</div>
<div class="line"><span class="lineno">  113</span>        }</div>
<div class="line"><span class="lineno">  114</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  115</span>        {</div>
<div class="line"><span class="lineno">  116</span>            <a class="code hl_class" href="class_o_v_r_screen_fade.html">OVRScreenFade</a>.instance.<a class="code hl_function" href="class_o_v_r_screen_fade.html#a8df1ac21b7aac08a9401a2d3187a95a1">SetExplicitFade</a>(0.0f);</div>
<div class="line"><span class="lineno">  117</span>        }</div>
<div class="line"><span class="lineno">  118</span> </div>
<div class="line"><span class="lineno">  119</span>        <span class="comment">// Offset the camera into the capsule that&#39;s used so that it doesn&#39;t scrape any</span></div>
<div class="line"><span class="lineno">  120</span>        <span class="comment">// overhanging geometry that the player can barely fit through.  Currently just</span></div>
<div class="line"><span class="lineno">  121</span>        <span class="comment">// based on where we start fading.</span></div>
<div class="line"><span class="lineno">  122</span>        <span class="keywordtype">float</span> capsuleOffset = FADE_RAY_LENGTH;</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>        <span class="comment">// Calculate the current height by re-adding the height offset to the camera</span></div>
<div class="line"><span class="lineno">  125</span>        <span class="comment">// position.</span></div>
<div class="line"><span class="lineno">  126</span>        <span class="keywordtype">float</span> calculatedHeight = CameraRig.centerEyeAnchor.localPosition.y + <a class="code hl_variable" href="class_character_camera_constraint.html#a4b897a03db74efd665506cab5b5e2538">HeightOffset</a> + capsuleOffset;</div>
<div class="line"><span class="lineno">  127</span> </div>
<div class="line"><span class="lineno">  128</span>        <span class="comment">// Calculate the minimum allowable capsule height, based on the current value, and</span></div>
<div class="line"><span class="lineno">  129</span>        <span class="comment">// the configured minimum value.  Current height is always a valid value to ensure</span></div>
<div class="line"><span class="lineno">  130</span>        <span class="comment">// we don&#39;t change the capsule height for any reason other than the camera position</span></div>
<div class="line"><span class="lineno">  131</span>        <span class="comment">// changing.</span></div>
<div class="line"><span class="lineno">  132</span>        <span class="keywordtype">float</span> calculatedMinimumHeight = <a class="code hl_variable" href="class_character_camera_constraint.html#a692acebb9f4beef325eb3931a0ab64c3">MinimumHeight</a>;</div>
<div class="line"><span class="lineno">  133</span>        calculatedMinimumHeight = Mathf.Min(_character.height, calculatedMinimumHeight);</div>
<div class="line"><span class="lineno">  134</span> </div>
<div class="line"><span class="lineno">  135</span>        <span class="comment">// Calculate the maximum allowable capsule height, based on the current value, the</span></div>
<div class="line"><span class="lineno">  136</span>        <span class="comment">// configured maximum value and whether there is something overhead.  Current</span></div>
<div class="line"><span class="lineno">  137</span>        <span class="comment">// height is always a valid value to ensure we don&#39;t change the capsule height for</span></div>
<div class="line"><span class="lineno">  138</span>        <span class="comment">// any reason other than the camera position changing.</span></div>
<div class="line"><span class="lineno">  139</span>        <span class="keywordtype">float</span> calculatedMaximumHeight = <a class="code hl_variable" href="class_character_camera_constraint.html#a3276b4c4e399fce310ece97a4554381f">MaximumHeight</a>;</div>
<div class="line"><span class="lineno">  140</span>        RaycastHit heightHitInfo;</div>
<div class="line"><span class="lineno">  141</span>        <span class="keywordflow">if</span> (Physics.SphereCast(_character.transform.position, _character.radius * 0.2f, Vector3.up, out heightHitInfo,</div>
<div class="line"><span class="lineno">  142</span>                <a class="code hl_variable" href="class_character_camera_constraint.html#a3276b4c4e399fce310ece97a4554381f">MaximumHeight</a> - _character.transform.position.y, <a class="code hl_variable" href="class_character_camera_constraint.html#a90a189091b552e1b2d520a0a5f78ad10">CollideLayers</a>, QueryTriggerInteraction.Ignore))</div>
<div class="line"><span class="lineno">  143</span>        {</div>
<div class="line"><span class="lineno">  144</span>            calculatedMaximumHeight = heightHitInfo.point.y;</div>
<div class="line"><span class="lineno">  145</span>        }</div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>        calculatedMaximumHeight = Mathf.Max(_character.height, calculatedMaximumHeight);</div>
<div class="line"><span class="lineno">  148</span> </div>
<div class="line"><span class="lineno">  149</span>        <span class="comment">// Finally adjust capsule height based on camera position, clamped to our acceptable</span></div>
<div class="line"><span class="lineno">  150</span>        <span class="comment">// minimum and maximum values.</span></div>
<div class="line"><span class="lineno">  151</span>        _character.height = Mathf.Clamp(calculatedHeight, calculatedMinimumHeight, calculatedMaximumHeight);</div>
<div class="line"><span class="lineno">  152</span> </div>
<div class="line"><span class="lineno">  153</span>        <span class="comment">// Offset the height of the camera to account for the changing capsule height.</span></div>
<div class="line"><span class="lineno">  154</span>        <span class="comment">// We want to select a height offset that places the camera near the top of the</span></div>
<div class="line"><span class="lineno">  155</span>        <span class="comment">// capsule.  We offset the camera down from the top of the capsule to prevent</span></div>
<div class="line"><span class="lineno">  156</span>        <span class="comment">// the screen from fading while the capsule barely fits under an overhang.</span></div>
<div class="line"><span class="lineno">  157</span>        <span class="keywordtype">float</span> cameraRigHeightOffset = <a class="code hl_variable" href="class_character_camera_constraint.html#a4b897a03db74efd665506cab5b5e2538">HeightOffset</a> - (_character.height * 0.5f) - capsuleOffset;</div>
<div class="line"><span class="lineno">  158</span>        CameraRig.transform.localPosition = <span class="keyword">new</span> Vector3(0.0f, cameraRigHeightOffset, 0.0f);</div>
<div class="line"><span class="lineno">  159</span>    }</div>
<div class="ttc" id="aclass_character_camera_constraint_html_a3276b4c4e399fce310ece97a4554381f"><div class="ttname"><a href="class_character_camera_constraint.html#a3276b4c4e399fce310ece97a4554381f">CharacterCameraConstraint.MaximumHeight</a></div><div class="ttdeci">float MaximumHeight</div><div class="ttdoc">Maximum height that the character capsule can grow to. To disable, set to capsule's height.</div><div class="ttdef"><b>Definition</b> <a href="_character_camera_constraint_8cs_source.html#l00061">CharacterCameraConstraint.cs:61</a></div></div>
<div class="ttc" id="aclass_character_camera_constraint_html_a4b897a03db74efd665506cab5b5e2538"><div class="ttname"><a href="class_character_camera_constraint.html#a4b897a03db74efd665506cab5b5e2538">CharacterCameraConstraint.HeightOffset</a></div><div class="ttdeci">float HeightOffset</div><div class="ttdoc">Offset is added to camera's real world height, effectively treating it as though the player was talle...</div><div class="ttdef"><b>Definition</b> <a href="_character_camera_constraint_8cs_source.html#l00049">CharacterCameraConstraint.cs:49</a></div></div>
<div class="ttc" id="aclass_character_camera_constraint_html_a5d1bc99955de76231f513a5f853b596d"><div class="ttname"><a href="class_character_camera_constraint.html#a5d1bc99955de76231f513a5f853b596d">CharacterCameraConstraint.CheckCameraOverlapped</a></div><div class="ttdeci">bool CheckCameraOverlapped()</div><div class="ttdoc">This method checks whether the camera is inside of geometry or has geometry between it and the charac...</div><div class="ttdef"><b>Definition</b> <a href="_character_camera_constraint_8cs_source.html#l00165">CharacterCameraConstraint.cs:165</a></div></div>
<div class="ttc" id="aclass_character_camera_constraint_html_a692acebb9f4beef325eb3931a0ab64c3"><div class="ttname"><a href="class_character_camera_constraint.html#a692acebb9f4beef325eb3931a0ab64c3">CharacterCameraConstraint.MinimumHeight</a></div><div class="ttdeci">float MinimumHeight</div><div class="ttdoc">Minimum height that the character capsule can shrink to. To disable, set to capsule's height.</div><div class="ttdef"><b>Definition</b> <a href="_character_camera_constraint_8cs_source.html#l00055">CharacterCameraConstraint.cs:55</a></div></div>
<div class="ttc" id="aclass_character_camera_constraint_html_a7357eb87689611d685fa3bc75ccaadb9"><div class="ttname"><a href="class_character_camera_constraint.html#a7357eb87689611d685fa3bc75ccaadb9">CharacterCameraConstraint.CheckCameraNearClipping</a></div><div class="ttdeci">bool CheckCameraNearClipping(out float result)</div><div class="ttdoc">This method checks whether the camera is close enough to geometry to cause it to start clipping,...</div><div class="ttdef"><b>Definition</b> <a href="_character_camera_constraint_8cs_source.html#l00189">CharacterCameraConstraint.cs:189</a></div></div>
<div class="ttc" id="aclass_character_camera_constraint_html_a90a189091b552e1b2d520a0a5f78ad10"><div class="ttname"><a href="class_character_camera_constraint.html#a90a189091b552e1b2d520a0a5f78ad10">CharacterCameraConstraint.CollideLayers</a></div><div class="ttdeci">LayerMask CollideLayers</div><div class="ttdoc">Collision layers to be used for the purposes of fading out the screen when the HMD is inside world ge...</div><div class="ttdef"><b>Definition</b> <a href="_character_camera_constraint_8cs_source.html#l00041">CharacterCameraConstraint.cs:41</a></div></div>
<div class="ttc" id="aclass_o_v_r_screen_fade_html"><div class="ttname"><a href="class_o_v_r_screen_fade.html">OVRScreenFade</a></div><div class="ttdoc">Fades the screen from black after a new scene is loaded. Fade can also be controlled mid-scene using ...</div><div class="ttdef"><b>Definition</b> <a href="_o_v_r_screen_fade_8cs_source.html#l00027">OVRScreenFade.cs:28</a></div></div>
<div class="ttc" id="aclass_o_v_r_screen_fade_html_a8df1ac21b7aac08a9401a2d3187a95a1"><div class="ttname"><a href="class_o_v_r_screen_fade.html#a8df1ac21b7aac08a9401a2d3187a95a1">OVRScreenFade.SetExplicitFade</a></div><div class="ttdeci">void SetExplicitFade(float level)</div><div class="ttdoc">Override current fade level.</div><div class="ttdef"><b>Definition</b> <a href="_o_v_r_screen_fade_8cs_source.html#l00199">OVRScreenFade.cs:199</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_character_camera_constraint_8cs_source.html#l00189">CheckCameraNearClipping()</a>, <a class="el" href="_character_camera_constraint_8cs_source.html#l00165">CheckCameraOverlapped()</a>, <a class="el" href="_character_camera_constraint_8cs_source.html#l00041">CollideLayers</a>, <a class="el" href="_character_camera_constraint_8cs_source.html#l00049">HeightOffset</a>, <a class="el" href="_character_camera_constraint_8cs_source.html#l00061">MaximumHeight</a>, <a class="el" href="_character_camera_constraint_8cs_source.html#l00055">MinimumHeight</a>, and <a class="el" href="_o_v_r_screen_fade_8cs_source.html#l00199">OVRScreenFade.SetExplicitFade()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_character_camera_constraint_a55243dc9eca5ba54edb89a4ea3acc9a9_cgraph.png" border="0" usemap="#aclass_character_camera_constraint_a55243dc9eca5ba54edb89a4ea3acc9a9_cgraph" alt=""/></div>
<map name="aclass_character_camera_constraint_a55243dc9eca5ba54edb89a4ea3acc9a9_cgraph" id="aclass_character_camera_constraint_a55243dc9eca5ba54edb89a4ea3acc9a9_cgraph">
<area shape="rect" title="This method is the handler for the PlayerController.CameraUpdated event, which is used to handle whet..." alt="" coords="5,72,191,115"/>
<area shape="rect" href="class_character_camera_constraint.html#a7357eb87689611d685fa3bc75ccaadb9" title="This method checks whether the camera is close enough to geometry to cause it to start clipping,..." alt="" coords="254,5,439,48"/>
<area shape="poly" title=" " alt="" coords="179,69,249,50,250,55,181,74"/>
<area shape="rect" href="class_character_camera_constraint.html#a5d1bc99955de76231f513a5f853b596d" title="This method checks whether the camera is inside of geometry or has geometry between it and the charac..." alt="" coords="254,72,439,115"/>
<area shape="poly" title=" " alt="" coords="191,91,238,91,238,96,191,96"/>
<area shape="rect" href="class_o_v_r_screen_fade.html#a8df1ac21b7aac08a9401a2d3187a95a1" title="Override current fade level." alt="" coords="239,139,454,165"/>
<area shape="poly" title=" " alt="" coords="192,113,239,124,272,132,271,137,238,129,191,118"/>
<area shape="rect" href="class_o_v_r_screen_fade.html#aba3ab4b582116174b13c2bce0b5efeb3" title="Update material alpha. UI fade and the current fade due to fade in/out animations (or explicit contro..." alt="" coords="502,131,691,173"/>
<area shape="poly" title=" " alt="" coords="454,149,487,149,487,155,454,155"/>
</map>
</div>

</div>
</div>
<a id="a7357eb87689611d685fa3bc75ccaadb9" name="a7357eb87689611d685fa3bc75ccaadb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7357eb87689611d685fa3bc75ccaadb9">&#9670;&#160;</a></span>CheckCameraNearClipping()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CharacterCameraConstraint.CheckCameraNearClipping </td>
          <td>(</td>
          <td class="paramtype">out float&#160;</td>
          <td class="paramname"><em>result</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method checks whether the camera is close enough to geometry to cause it to start clipping, and if so, return the overlap amount. </p>

<p class="definition">Definition at line <a class="el" href="_character_camera_constraint_8cs_source.html#l00189">189</a> of file <a class="el" href="_character_camera_constraint_8cs_source.html">CharacterCameraConstraint.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  190</span>    {</div>
<div class="line"><span class="lineno">  191</span>        Camera camera = <a class="code hl_variable" href="class_character_camera_constraint.html#acd549a12915c2775eaa50229c7c057af">CameraRig</a>.<a class="code hl_property" href="class_o_v_r_camera_rig.html#a2716fdeda387531693c0c1f83b7a1b57">centerEyeAnchor</a>.GetComponent&lt;Camera&gt;();</div>
<div class="line"><span class="lineno">  192</span> </div>
<div class="line"><span class="lineno">  193</span>        Vector3[] frustumCorners = <span class="keyword">new</span> Vector3[4];</div>
<div class="line"><span class="lineno">  194</span>        camera.CalculateFrustumCorners(<span class="keyword">new</span> Rect(0, 0, 1, 1), camera.nearClipPlane, Camera.MonoOrStereoscopicEye.Mono,</div>
<div class="line"><span class="lineno">  195</span>            frustumCorners);</div>
<div class="line"><span class="lineno">  196</span> </div>
<div class="line"><span class="lineno">  197</span>        <span class="comment">// Cast a ray through each corner of the frustum and the center, and take the</span></div>
<div class="line"><span class="lineno">  198</span>        <span class="comment">// maximum overlap (if any) returned as the basis to decide how much to fade.</span></div>
<div class="line"><span class="lineno">  199</span>        Vector3 frustumBottomLeft = CameraRig.centerEyeAnchor.position +</div>
<div class="line"><span class="lineno">  200</span>                                    (Vector3.Normalize(<a class="code hl_variable" href="class_character_camera_constraint.html#acd549a12915c2775eaa50229c7c057af">CameraRig</a>.<a class="code hl_property" href="class_o_v_r_camera_rig.html#a2716fdeda387531693c0c1f83b7a1b57">centerEyeAnchor</a>.TransformVector(frustumCorners[0])) *</div>
<div class="line"><span class="lineno">  201</span>                                     FADE_RAY_LENGTH);</div>
<div class="line"><span class="lineno">  202</span>        Vector3 frustumTopLeft = CameraRig.centerEyeAnchor.position +</div>
<div class="line"><span class="lineno">  203</span>                                 (Vector3.Normalize(<a class="code hl_variable" href="class_character_camera_constraint.html#acd549a12915c2775eaa50229c7c057af">CameraRig</a>.<a class="code hl_property" href="class_o_v_r_camera_rig.html#a2716fdeda387531693c0c1f83b7a1b57">centerEyeAnchor</a>.TransformVector(frustumCorners[1])) *</div>
<div class="line"><span class="lineno">  204</span>                                  FADE_RAY_LENGTH);</div>
<div class="line"><span class="lineno">  205</span>        Vector3 frustumTopRight = CameraRig.centerEyeAnchor.position +</div>
<div class="line"><span class="lineno">  206</span>                                  (Vector3.Normalize(<a class="code hl_variable" href="class_character_camera_constraint.html#acd549a12915c2775eaa50229c7c057af">CameraRig</a>.<a class="code hl_property" href="class_o_v_r_camera_rig.html#a2716fdeda387531693c0c1f83b7a1b57">centerEyeAnchor</a>.TransformVector(frustumCorners[2])) *</div>
<div class="line"><span class="lineno">  207</span>                                   FADE_RAY_LENGTH);</div>
<div class="line"><span class="lineno">  208</span>        Vector3 frustumBottomRight = CameraRig.centerEyeAnchor.position +</div>
<div class="line"><span class="lineno">  209</span>                                     (Vector3.Normalize(<a class="code hl_variable" href="class_character_camera_constraint.html#acd549a12915c2775eaa50229c7c057af">CameraRig</a>.<a class="code hl_property" href="class_o_v_r_camera_rig.html#a2716fdeda387531693c0c1f83b7a1b57">centerEyeAnchor</a>.TransformVector(frustumCorners[3])) *</div>
<div class="line"><span class="lineno">  210</span>                                      FADE_RAY_LENGTH);</div>
<div class="line"><span class="lineno">  211</span>        Vector3 frustumCenter = (frustumTopLeft + frustumBottomRight) / 2.0f;</div>
<div class="line"><span class="lineno">  212</span> </div>
<div class="line"><span class="lineno">  213</span>        <span class="keywordtype">bool</span> hit = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  214</span>        result = 0.0f;</div>
<div class="line"><span class="lineno">  215</span>        <span class="keywordflow">foreach</span> (Vector3 frustumPoint <span class="keywordflow">in</span> <span class="keyword">new</span> Vector3[]</div>
<div class="line"><span class="lineno">  216</span>                     { frustumBottomLeft, frustumTopLeft, frustumTopRight, frustumBottomRight, frustumCenter })</div>
<div class="line"><span class="lineno">  217</span>        {</div>
<div class="line"><span class="lineno">  218</span>            RaycastHit hitInfo;</div>
<div class="line"><span class="lineno">  219</span>            <span class="keywordflow">if</span> (Physics.Linecast(<a class="code hl_variable" href="class_character_camera_constraint.html#acd549a12915c2775eaa50229c7c057af">CameraRig</a>.<a class="code hl_property" href="class_o_v_r_camera_rig.html#a2716fdeda387531693c0c1f83b7a1b57">centerEyeAnchor</a>.position, frustumPoint, out hitInfo, <a class="code hl_variable" href="class_character_camera_constraint.html#a90a189091b552e1b2d520a0a5f78ad10">CollideLayers</a>,</div>
<div class="line"><span class="lineno">  220</span>                    QueryTriggerInteraction.Ignore))</div>
<div class="line"><span class="lineno">  221</span>            {</div>
<div class="line"><span class="lineno">  222</span>                hit = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  223</span>                result = Mathf.Max(result, Vector3.Distance(hitInfo.point, frustumPoint));</div>
<div class="line"><span class="lineno">  224</span>            }</div>
<div class="line"><span class="lineno">  225</span>        }</div>
<div class="line"><span class="lineno">  226</span> </div>
<div class="line"><span class="lineno">  227</span>        <span class="keywordflow">return</span> hit;</div>
<div class="line"><span class="lineno">  228</span>    }</div>
<div class="ttc" id="aclass_character_camera_constraint_html_acd549a12915c2775eaa50229c7c057af"><div class="ttname"><a href="class_character_camera_constraint.html#acd549a12915c2775eaa50229c7c057af">CharacterCameraConstraint.CameraRig</a></div><div class="ttdeci">OVRCameraRig CameraRig</div><div class="ttdoc">This should be a reference to the OVRCameraRig that is usually a child of the PlayerController.</div><div class="ttdef"><b>Definition</b> <a href="_character_camera_constraint_8cs_source.html#l00033">CharacterCameraConstraint.cs:33</a></div></div>
<div class="ttc" id="aclass_o_v_r_camera_rig_html_a2716fdeda387531693c0c1f83b7a1b57"><div class="ttname"><a href="class_o_v_r_camera_rig.html#a2716fdeda387531693c0c1f83b7a1b57">OVRCameraRig.centerEyeAnchor</a></div><div class="ttdeci">Transform centerEyeAnchor</div><div class="ttdoc">Always coincides with average of the left and right eye poses.</div><div class="ttdef"><b>Definition</b> <a href="_o_v_r_camera_rig_8cs_source.html#l00067">OVRCameraRig.cs:67</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_character_camera_constraint_8cs_source.html#l00033">CameraRig</a>, <a class="el" href="_o_v_r_camera_rig_8cs_source.html#l00067">OVRCameraRig.centerEyeAnchor</a>, and <a class="el" href="_character_camera_constraint_8cs_source.html#l00041">CollideLayers</a>.</p>

</div>
</div>
<a id="a5d1bc99955de76231f513a5f853b596d" name="a5d1bc99955de76231f513a5f853b596d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d1bc99955de76231f513a5f853b596d">&#9670;&#160;</a></span>CheckCameraOverlapped()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CharacterCameraConstraint.CheckCameraOverlapped </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method checks whether the camera is inside of geometry or has geometry between it and the character's capsule. </p>

<p class="definition">Definition at line <a class="el" href="_character_camera_constraint_8cs_source.html#l00165">165</a> of file <a class="el" href="_character_camera_constraint_8cs_source.html">CharacterCameraConstraint.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  166</span>    {</div>
<div class="line"><span class="lineno">  167</span>        Camera camera = <a class="code hl_variable" href="class_character_camera_constraint.html#acd549a12915c2775eaa50229c7c057af">CameraRig</a>.<a class="code hl_property" href="class_o_v_r_camera_rig.html#a2716fdeda387531693c0c1f83b7a1b57">centerEyeAnchor</a>.GetComponent&lt;Camera&gt;();</div>
<div class="line"><span class="lineno">  168</span> </div>
<div class="line"><span class="lineno">  169</span>        <span class="comment">// Use a ray from the capsule starting at the camera&#39;s height, but clamped</span></div>
<div class="line"><span class="lineno">  170</span>        <span class="comment">// to make sure it comes from the capsule.  We clamp slightly inside of</span></div>
<div class="line"><span class="lineno">  171</span>        <span class="comment">// the capsule to account for the sphere cast radius and a small offset</span></div>
<div class="line"><span class="lineno">  172</span>        <span class="comment">// in case things would otherwise be touching.</span></div>
<div class="line"><span class="lineno">  173</span>        Vector3 origin = _character.transform.position;</div>
<div class="line"><span class="lineno">  174</span>        <span class="keywordtype">float</span> yOffset = Mathf.Max(0.0f, (_character.height * 0.5f) - camera.nearClipPlane - 0.01f);</div>
<div class="line"><span class="lineno">  175</span>        origin.y = Mathf.Clamp(<a class="code hl_variable" href="class_character_camera_constraint.html#acd549a12915c2775eaa50229c7c057af">CameraRig</a>.<a class="code hl_property" href="class_o_v_r_camera_rig.html#a2716fdeda387531693c0c1f83b7a1b57">centerEyeAnchor</a>.position.y, _character.transform.position.y - yOffset,</div>
<div class="line"><span class="lineno">  176</span>            _character.transform.position.y + yOffset);</div>
<div class="line"><span class="lineno">  177</span>        Vector3 delta = CameraRig.centerEyeAnchor.position - origin;</div>
<div class="line"><span class="lineno">  178</span>        <span class="keywordtype">float</span> distance = delta.magnitude;</div>
<div class="line"><span class="lineno">  179</span>        Vector3 direction = delta / distance;</div>
<div class="line"><span class="lineno">  180</span>        RaycastHit hitInfo;</div>
<div class="line"><span class="lineno">  181</span>        <span class="keywordflow">return</span> Physics.SphereCast(origin, camera.nearClipPlane, direction, out hitInfo, distance, <a class="code hl_variable" href="class_character_camera_constraint.html#a90a189091b552e1b2d520a0a5f78ad10">CollideLayers</a>,</div>
<div class="line"><span class="lineno">  182</span>            QueryTriggerInteraction.Ignore);</div>
<div class="line"><span class="lineno">  183</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="_character_camera_constraint_8cs_source.html#l00033">CameraRig</a>, <a class="el" href="_o_v_r_camera_rig_8cs_source.html#l00067">OVRCameraRig.centerEyeAnchor</a>, and <a class="el" href="_character_camera_constraint_8cs_source.html#l00041">CollideLayers</a>.</p>

</div>
</div>
<a id="a59a365ed8bd6930e6ef070ff61009c6b" name="a59a365ed8bd6930e6ef070ff61009c6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59a365ed8bd6930e6ef070ff61009c6b">&#9670;&#160;</a></span>OnDisable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CharacterCameraConstraint.OnDisable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_character_camera_constraint_8cs_source.html#l00081">81</a> of file <a class="el" href="_character_camera_constraint_8cs_source.html">CharacterCameraConstraint.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   82</span>    {</div>
<div class="line"><span class="lineno">   83</span>        _simplePlayerController.CameraUpdated -= <a class="code hl_function" href="class_character_camera_constraint.html#a55243dc9eca5ba54edb89a4ea3acc9a9">CameraUpdate</a>;</div>
<div class="line"><span class="lineno">   84</span>    }</div>
<div class="ttc" id="aclass_character_camera_constraint_html_a55243dc9eca5ba54edb89a4ea3acc9a9"><div class="ttname"><a href="class_character_camera_constraint.html#a55243dc9eca5ba54edb89a4ea3acc9a9">CharacterCameraConstraint.CameraUpdate</a></div><div class="ttdeci">void CameraUpdate()</div><div class="ttdoc">This method is the handler for the PlayerController.CameraUpdated event, which is used to handle whet...</div><div class="ttdef"><b>Definition</b> <a href="_character_camera_constraint_8cs_source.html#l00095">CharacterCameraConstraint.cs:95</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac7be9a6729269651319efa1da90c63d5" name="ac7be9a6729269651319efa1da90c63d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7be9a6729269651319efa1da90c63d5">&#9670;&#160;</a></span>OnEnable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CharacterCameraConstraint.OnEnable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_character_camera_constraint_8cs_source.html#l00076">76</a> of file <a class="el" href="_character_camera_constraint_8cs_source.html">CharacterCameraConstraint.cs</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   77</span>    {</div>
<div class="line"><span class="lineno">   78</span>        _simplePlayerController.CameraUpdated += <a class="code hl_function" href="class_character_camera_constraint.html#a55243dc9eca5ba54edb89a4ea3acc9a9">CameraUpdate</a>;</div>
<div class="line"><span class="lineno">   79</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ac3787f624ceb4def13302c0a960b2ec0" name="ac3787f624ceb4def13302c0a960b2ec0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3787f624ceb4def13302c0a960b2ec0">&#9670;&#160;</a></span>_character</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CapsuleCollider CharacterCameraConstraint._character</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_character_camera_constraint_8cs_source.html#l00063">63</a> of file <a class="el" href="_character_camera_constraint_8cs_source.html">CharacterCameraConstraint.cs</a>.</p>

</div>
</div>
<a id="afd45fa3b9036ae9b579140684d773410" name="afd45fa3b9036ae9b579140684d773410"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd45fa3b9036ae9b579140684d773410">&#9670;&#160;</a></span>_simplePlayerController</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_simple_capsule_with_stick_movement.html">SimpleCapsuleWithStickMovement</a> CharacterCameraConstraint._simplePlayerController</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_character_camera_constraint_8cs_source.html#l00064">64</a> of file <a class="el" href="_character_camera_constraint_8cs_source.html">CharacterCameraConstraint.cs</a>.</p>

</div>
</div>
<a id="acd549a12915c2775eaa50229c7c057af" name="acd549a12915c2775eaa50229c7c057af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd549a12915c2775eaa50229c7c057af">&#9670;&#160;</a></span>CameraRig</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_o_v_r_camera_rig.html">OVRCameraRig</a> CharacterCameraConstraint.CameraRig</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This should be a reference to the <a class="el" href="class_o_v_r_camera_rig.html" title="A head-tracked stereoscopic virtual reality camera rig.">OVRCameraRig</a> that is usually a child of the PlayerController. </p>

<p class="definition">Definition at line <a class="el" href="_character_camera_constraint_8cs_source.html#l00033">33</a> of file <a class="el" href="_character_camera_constraint_8cs_source.html">CharacterCameraConstraint.cs</a>.</p>

</div>
</div>
<a id="a90a189091b552e1b2d520a0a5f78ad10" name="a90a189091b552e1b2d520a0a5f78ad10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90a189091b552e1b2d520a0a5f78ad10">&#9670;&#160;</a></span>CollideLayers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LayerMask CharacterCameraConstraint.CollideLayers</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Collision layers to be used for the purposes of fading out the screen when the HMD is inside world geometry and adjusting the capsule height. </p>

<p class="definition">Definition at line <a class="el" href="_character_camera_constraint_8cs_source.html#l00041">41</a> of file <a class="el" href="_character_camera_constraint_8cs_source.html">CharacterCameraConstraint.cs</a>.</p>

</div>
</div>
<a id="a288ba2fdc7a1ad9f0cc516ae4947383e" name="a288ba2fdc7a1ad9f0cc516ae4947383e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a288ba2fdc7a1ad9f0cc516ae4947383e">&#9670;&#160;</a></span>FADE_AMOUNT_MAXIMUM</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const float CharacterCameraConstraint.FADE_AMOUNT_MAXIMUM = 1.0f</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_character_camera_constraint_8cs_source.html#l00027">27</a> of file <a class="el" href="_character_camera_constraint_8cs_source.html">CharacterCameraConstraint.cs</a>.</p>

</div>
</div>
<a id="aa2789d0cb3730585637b2f4674cbc2d9" name="aa2789d0cb3730585637b2f4674cbc2d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2789d0cb3730585637b2f4674cbc2d9">&#9670;&#160;</a></span>FADE_OVERLAP_MAXIMUM</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const float CharacterCameraConstraint.FADE_OVERLAP_MAXIMUM = 0.1f</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_character_camera_constraint_8cs_source.html#l00024">24</a> of file <a class="el" href="_character_camera_constraint_8cs_source.html">CharacterCameraConstraint.cs</a>.</p>

</div>
</div>
<a id="a3389bf44ab5de0a598255d9574d4786f" name="a3389bf44ab5de0a598255d9574d4786f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3389bf44ab5de0a598255d9574d4786f">&#9670;&#160;</a></span>FADE_RAY_LENGTH</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const float CharacterCameraConstraint.FADE_RAY_LENGTH = 0.25f</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_character_camera_constraint_8cs_source.html#l00021">21</a> of file <a class="el" href="_character_camera_constraint_8cs_source.html">CharacterCameraConstraint.cs</a>.</p>

</div>
</div>
<a id="a4b897a03db74efd665506cab5b5e2538" name="a4b897a03db74efd665506cab5b5e2538"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b897a03db74efd665506cab5b5e2538">&#9670;&#160;</a></span>HeightOffset</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float CharacterCameraConstraint.HeightOffset</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Offset is added to camera's real world height, effectively treating it as though the player was taller/standing higher. </p>

<p class="definition">Definition at line <a class="el" href="_character_camera_constraint_8cs_source.html#l00049">49</a> of file <a class="el" href="_character_camera_constraint_8cs_source.html">CharacterCameraConstraint.cs</a>.</p>

</div>
</div>
<a id="a3276b4c4e399fce310ece97a4554381f" name="a3276b4c4e399fce310ece97a4554381f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3276b4c4e399fce310ece97a4554381f">&#9670;&#160;</a></span>MaximumHeight</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float CharacterCameraConstraint.MaximumHeight</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum height that the character capsule can grow to. To disable, set to capsule's height. </p>

<p class="definition">Definition at line <a class="el" href="_character_camera_constraint_8cs_source.html#l00061">61</a> of file <a class="el" href="_character_camera_constraint_8cs_source.html">CharacterCameraConstraint.cs</a>.</p>

</div>
</div>
<a id="a692acebb9f4beef325eb3931a0ab64c3" name="a692acebb9f4beef325eb3931a0ab64c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a692acebb9f4beef325eb3931a0ab64c3">&#9670;&#160;</a></span>MinimumHeight</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float CharacterCameraConstraint.MinimumHeight</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Minimum height that the character capsule can shrink to. To disable, set to capsule's height. </p>

<p class="definition">Definition at line <a class="el" href="_character_camera_constraint_8cs_source.html#l00055">55</a> of file <a class="el" href="_character_camera_constraint_8cs_source.html">CharacterCameraConstraint.cs</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Assets/Oculus/SampleFramework/Core/Locomotion/Scripts/<a class="el" href="_character_camera_constraint_8cs_source.html">CharacterCameraConstraint.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
